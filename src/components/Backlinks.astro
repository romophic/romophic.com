---
import { ICONS } from '@/consts'
import { Icon } from 'astro-icon/components'
import { type CollectionEntry } from 'astro:content'

interface Props {
  backlinks: CollectionEntry<'blog'>[]
}

const { backlinks } = Astro.props

if (backlinks.length === 0) {
  return null
}
---

<div class="mt-12 border-t pt-8">
  <h3
    class="text-muted-foreground mb-4 flex items-center gap-2 text-lg font-semibold"
  >
    <Icon name={ICONS.link} class="size-5" />
    Linked References
  </h3>
  <div class="grid gap-4 sm:grid-cols-2">
    {
      backlinks.map((post) => (
        <a
          href={`/blog/${post.id}`}
          class="bg-card hover:bg-accent hover:text-accent-foreground group block rounded-lg border p-4 transition-colors"
        >
          <div class="font-medium decoration-transparent underline-offset-4 transition-all duration-300 group-hover:underline group-hover:decoration-current">
            {post.data.title}
          </div>
          {post.data.description && (
            <p class="text-muted-foreground mt-1 line-clamp-2 text-sm">
              {post.data.description}
            </p>
          )}
        </a>
      ))
    }
  </div>
</div>
